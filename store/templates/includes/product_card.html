{% comment %}
This template renders a single product card for luxury jewelry and makeup.
It expects a 'product' object in its context.
{% endcomment %}

{% load static %}
{% load product_images %}

<div class="col mb-5">
    <div class="card h-100 shadow-sm border-0" style="transition: transform 0.3s;">

        {% if product.is_sale %}
        <div class="badge text-white position-absolute" style="top: 0.5rem; right: 0.5rem; background: linear-gradient(135deg, #ff6b6b, #feca57);">Sale</div>
        {% endif %}

        {% if product.featured %}
        <div class="badge text-white position-absolute" style="top: 0.5rem; left: 0.5rem; background: linear-gradient(135deg, #daa520, #8b4513);">Featured</div>
        {% endif %}

        <img class="card-img-top" src="{% if product.image %}{{ product.image.url }}{% else %}{% static product.name|get_product_image %}{% endif %}" alt="{{ product.name }}" height="280" style="object-fit: cover;" />
        
        <div class="card-body p-4">
            <div class="text-center">
                <h5 class="fw-bolder mb-2">{{ product.name }}</h5>
                
                {% if product.brand %}
                <p class="text-muted small mb-2">{{ product.brand }}</p>
                {% endif %}
                
                {% if product.material %}
                <p class="text-muted small mb-2"><i class="bi bi-gem me-1"></i>{{ product.material }}</p>
                {% endif %}
                
                {% if product.shade %}
                <p class="text-muted small mb-2"><i class="bi bi-palette me-1"></i>{{ product.shade }}</p>
                {% endif %}
                
                <div class="mb-3">
                    {% if product.is_sale %}
                    <span class="text-muted text-decoration-line-through me-2">${{ product.price }}</span>
                    <span class="fw-bold" style="color: #8b4513;">${{ product.sale_price }}</span>
                    {% else %}
                    <span class="fw-bold" style="color: #8b4513;">${{ product.price }}</span>
                    {% endif %}
                </div>
                
                {% if not product.in_stock %}
                <span class="badge bg-danger">Out of Stock</span>
                {% endif %}
            </div>
        </div>

        <div class="card-footer p-4 pt-0 border-top-0 bg-transparent">
            <div class="text-center">
                {% if product.in_stock %}
                <a class="btn mt-auto w-100" style="background: linear-gradient(135deg, #daa520, #8b4513); color: white; border: none;" href="{% url 'product' product.id %}">
                    <i class="bi bi-eye me-2"></i>View Details
                </a>
                {% else %}
                <button class="btn btn-secondary mt-auto w-100" disabled>
                    <i class="bi bi-x-circle me-2"></i>Out of Stock
                </button>
                {% endif %}
            </div>
        </div>
    </div>
</div>

<style>
.card:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 25px rgba(0,0,0,0.15) !important;
}
</style>
